{% extends "layout.html" %}
{% block title %}用户列表{% endblock %}
{% block content %}
<div class="page-header">
  <form method="get" class="pull-right form-inline">
    <input type="text" class="form-control input-sm" placeholder="ID" name="id">
    <input type="text" class="form-control input-sm" placeholder="名字" name="name">
    <input type="text" class="form-control input-sm" placeholder="学号" name="stuid">
    <select name="category" class="input-sm form-control">
      <option value="None" selected>入学年份</option>
      {% for c in categories %}
        <option value="{{c.category}}">{{c.category}}</option>
      {% endfor %}
    </select>
    <select name="dropped" class="input-sm form-control">
      <option value="None" selected>是否转出？</option>
      <option value="False">未转出</option>
      <option value="True">已转出</option>
    </select>
    <select name="allow_login" class="input-sm form-control">
      <option value="None" selected>是否允许登入？</option>
      <option value="True">允许</option>
      <option value="False">不允许</option>
    </select>
    <button type="submit" class="form-control btn-sm btn-primary">
      <i class="icon-filter icon-white"></i> 过滤
    </button>
  </form>
  <h1>用户列表</h1>
</div>

<form id="table-toolbox">
  <label>全选 <input type="checkbox" class="table-helper-select-all"></label>
  <input type="text" name="selected" class="table-helper-selected" data-bind="#select-list-add-users">
</form>
<form method="post" class="form-inline" action="{{ url_for('post_task_add_users') }}">
  <input type="text" name="selected" id="select-list-add-users">
  <select name="taskid" class="input-sm form-control">
    <option value="None" selected>任务列表</option>
    {% for t in tasks %}
      <option value="{{t.id}}">{{t.title}}</option>
    {% endfor %}
  </select>
  <button type="submit" class="form-control btn-sm btn-primary">
    <i class="icon-filter icon-white"></i> 布置任务
  </button>
</form>

<table class="table table-striped table-bordered table-condensed table-helper table-hover" data-table-helper-toolbox="#table-toolbox">
  <thead>
    <tr>
      <th>选中</th>
      <th>ID</th>
      <th>名字</th>
      <th>入学年份</th>
      <th>学号</th>
      <th>已转出</th>
      <th>允许登入</th>
    </tr>
  </thead>
  <tbody>
  {% for u in users %}
    <tr data-value="{{u.id}}">
      <td><input type="checkbox" class="table-helper-checkbox"></td>
      <td>{{u.id}}</td>
      <td>{{u.name}}</td>
      <td>{{u.category}}</td>
      <td>{{u.stuid}}</td>
      <td><input type="checkbox" {% if u.dropped %}checked{% endif %} disabled></td>
      <td><input type="checkbox" {% if u.allow_login %}checked{% endif %} disabled></td>
    </tr>
  {% endfor %}
  </tbody>
</table>

{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='table_helper.js') }}"></script>
{% endblock %}